!function(){"use strict";var e=angular.module("pasvaz.bindonce",[]);e.directive("bindonce",function(){function b(e){var t;return e=!(!e||0===e.length)&&!("f"===(t=(""+e).toLowerCase())||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}var h=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10);return isNaN(h)&&(h=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10)),{restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(r,e,t,u){function d(n,e){n.transclude(e,function(e){var t=n.element.parent(),r=n.element&&n.element[n.element.length-1],a=t&&t[0]||r&&r.parentNode,i=r&&r.nextSibling||null;angular.forEach(e,function(e){a.insertBefore(e,i)})})}var a={watcherRemover:void 0,binders:[],group:t.boName,element:e,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=r.$watch(e,function(e){null!=e&&(t.removeWatcher(),t.checkBindonce(e))},!0)},checkBindonce:function(e){var t=this,r=e.$promise?e.$promise.then:e.then;"function"==typeof r?r(function(){t.runBinders()}):t.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;0<this.binders.length;){var i=this.binders.shift();if(!this.group||this.group==i.group){var e,t=i.scope.$eval(i.interpolate?u(i.value):i.value);switch(i.attr){case"boIf":b(t)&&d(i,i.scope.$new());break;case"boSwitch":var r,a=i.controller[0];(r=a.cases["!"+t]||a.cases["?"])&&(i.scope.$eval(i.attrs.change),angular.forEach(r,function(e){d(e,i.scope.$new())}));break;case"boSwitchWhen":(e=i.controller[0]).cases["!"+i.attrs.boSwitchWhen]=e.cases["!"+i.attrs.boSwitchWhen]||[],e.cases["!"+i.attrs.boSwitchWhen].push({transclude:i.transclude,element:i.element});break;case"boSwitchDefault":(e=i.controller[0]).cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:i.transclude,element:i.element});break;case"hide":case"show":n=i.element,c=i.attr,o=t,l=s=void 0,s="show"===c?"":"none",l="hide"===c?"":"none",n.css("display",b(o)?s:l);break;case"class":!function(e,t){var r;angular.isObject(t)&&!angular.isArray(t)&&(r=[],angular.forEach(t,function(e,t){e&&r.push(t)}),t=r),t&&e.addClass(angular.isArray(t)?t.join(" "):t)}(i.element,t);break;case"text":i.element.text(t);break;case"html":i.element.html(t);break;case"style":i.element.css(t);break;case"disabled":i.element.prop("disabled",t);break;case"src":i.element.attr(i.attr,t),h&&i.element.prop("src",t);break;case"attr":angular.forEach(i.attrs,function(e,t){var r,a;t.match(/^boAttr./)&&i.attrs[t]&&(r=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=i.scope.$eval(i.attrs[t]),i.element.attr(r,a))});break;case"href":case"alt":case"title":case"id":case"value":i.element.attr(i.attr,t)}}}var n,c,o,s,l;this.ran=!0}};angular.extend(this,a)}],link:function(e,t,r,a){var i=r.bindonce&&e.$eval(r.bindonce);null!=i?a.checkBindonce(i):(a.setupWatcher(r.bindonce),t.bind("$destroy",a.removeWatcher))}}}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(l){return e.directive(l.directiveName,function(){return{priority:l.priority||200,transclude:l.transclude||!1,terminal:l.terminal||!1,require:["^bindonce"].concat(l.require||[]),controller:l.controller,compile:function(e,t,s){return function(e,t,r,a){var i=a[0],n=r.boParent;if(n&&i.group!==n){for(var c,o=i.element.parent(),i=void 0;9!==o[0].nodeType&&o.length;){if((c=o.data("$bindonceController"))&&c.group===n){i=c;break}o=o.parent()}if(!i)throw new Error("No bindonce controller: "+n)}i.addBinder({element:t,attr:l.attribute||l.directiveName,attrs:r,value:r[l.directiveName],interpolate:l.interpolate,group:n,transclude:s,controller:a.slice(1),scope:e})}}}})})}();